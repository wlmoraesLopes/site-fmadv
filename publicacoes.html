<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publicações - Franceschini e Miranda Advogados</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Inter:wght@600;700&display=swap');

        :root {
            --vinho: #7b0606;
            --dourado: #f3a600;
            --creme: #fdf6ee;
        }

        body {
            font-family: Inter, Arial, sans-serif;
            background: var(--creme);
            color: #232231;
            margin: 0;
        }

        .site-bg {
            min-height: 100vh;
        }

        .marca-dagua {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            width: 45vw;
            max-width: 400px;
            height: 45vw;
            max-height: 400px;
            opacity: 0.03;
            font-family: Montserrat, sans-serif;
            font-weight: 900;
            font-size: 22vw;
            line-height: 1;
            color: var(--vinho);
            pointer-events: none;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            white-space: nowrap;
        }
        .marca-dagua::before {
            content: "F M";
            letter-spacing: -0.03em;
        }

        .header-fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100vw;
            z-index: 50;
            background: var(--vinho);
            box-shadow: 0 2px 18px #4b060677;
        }

        .topbar {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            align-items: center;
            padding: 3px 5vw 1px 5vw;
            min-height: 78px;
            box-sizing: border-box;
        }

        .topbar-filler {
            min-width: 280px;
            visibility: hidden;
        }

        .logo-center-projection {
            grid-column: 2 / 3;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 76px;
        }

        .logo-img-fm {
            max-width: 96%;
            width: 350px;
            min-width: 180px;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .contact-top {
            grid-column: 3 / 4;
            justify-self: end;
            text-align: right;
            min-width: 280px;
            font-size: 1.1em;
            align-self: center;
        }

        .contact-top span {
            vertical-align: middle;
            margin-right: 3px;
            font-size: 1.13em;
            color: #ffe0e0;
        }

        .contact-title,
        .contact-detail {
            color: var(--creme);
            font-family: Montserrat, Arial, sans-serif;
        }

        .social-links {
            margin: 9px 0 2px;
            text-align: right;
        }

        .social-links a {
            color: #fff;
            background: #630303;
            border-radius: 50%;
            padding: 7px 0;
            margin-left: 7px;
            width: 38px;
            display: inline-block;
            text-align: center;
            transition: background 0.2s, color 0.2s;
            font-size: 1.18em;
            box-shadow: 0 2px 10px #20020222;
            vertical-align: middle;
        }

        .social-links a:hover {
            background: #f3a600;
            color: #7b0606;
        }

        .header-spacer {
            height: 190px;
        }

        nav {
            background: var(--vinho);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 70px;
            padding: 16px 0;
            font-size: 1.22em;
            font-weight: 600;
            letter-spacing: 0.12em;
            box-shadow: 0 7px 16px #551a1a23;
            width: 100%;
            margin: 0 auto;
            position: relative;
            z-index: 4;
        }

        nav a {
            text-decoration: none;
            color: var(--creme);
            transition: 0.2s;
            padding-bottom: 3px;
            font-size: 1em;
            font-family: Inter, Arial, sans-serif;
            font-weight: 600;
            letter-spacing: 0.05em;
            display: inline-block;
        }

        nav a:hover,
        nav a.active {
            color: #f3a600;
            border-bottom: 2px solid #fdeede;
        }

        .banner-bg {
            background: url('https://images.pexels.com/photos/5539854/pexels-photo-5539854.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2') center/cover no-repeat;
            min-height: 250px;
            width: 100vw;
            border-bottom: 4px solid var(--dourado);
            filter: grayscale(100%);
        }

        .pagetitle {
            text-align: center;
            padding: 60px 0;
            position: relative;
        }

        .pagetitle h1 {
            font-family: Montserrat, sans-serif;
            color: var(--vinho);
            font-size: 3rem;
            font-weight: 900;
            margin: 0;
            font-style: italic;
            letter-spacing: 0.03em;
            position: relative;
            display: inline-block;
        }

        .pagetitle h1::before {
            content: "";
            color: var(--dourado);
            font-size: 2.5rem;
            margin-right: 15px;
            position: relative;
            display: inline-block;
        }

        .publicacoes-container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 50px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .sidebar-publicacoes {
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 3px 15px rgba(123, 6, 6, 0.08);
            height: fit-content;
            border: 1px solid #e8d9c9;
        }

        .sidebar-publicacoes h3 {
            color: var(--vinho);
            font-family: Montserrat, sans-serif;
            font-size: 1.3rem;
            font-weight: 700;
            font-style: italic;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--dourado);
        }

        .categoria-lista,
        .autor-lista {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .categoria-lista li,
        .autor-lista li {
            margin-bottom: 10px;
        }

        .categoria-lista a,
        .autor-lista a {
            color: #444;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 6px;
            display: block;
            transition: all 0.3s ease;
            font-family: Inter, sans-serif;
            font-size: 1rem;
        }

        .categoria-lista a:hover,
        .autor-lista a:hover,
        .categoria-lista a.filtro-ativo,
        .autor-lista a.filtro-ativo {
            background: var(--vinho);
            color: #fff;
            transform: translateX(5px);
        }

        .autor-lista {
            margin-top: 40px;
        }

        .lista-artigos {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .artigo-card {
            background: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.06);
            border: 1px solid #e8d9c9;
            transition: all 0.3s ease;
        }

        .artigo-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .artigo-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 15px;
        }

        .artigo-titulo {
            color: var(--vinho);
            font-family: Montserrat, sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            margin: 0;
            flex: 1;
            line-height: 1.3;
        }

        .artigo-categoria {
            background: var(--dourado);
            color: var(--vinho);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .artigo-meta {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .artigo-resumo {
            color: #444;
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .btn-ler-artigo {
            background: transparent;
            border: 2px solid var(--vinho);
            color: var(--vinho);
            padding: 8px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            cursor: pointer;
            font-family: Montserrat, sans-serif;
        }

        .btn-ler-artigo:hover {
            background: var(--vinho);
            color: #fff;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-conteudo {
            background: #fff;
            margin: 2% auto;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            background: var(--vinho);
            color: #fff;
            padding: 25px 30px;
            position: relative;
        }

        .modal-titulo {
            font-family: Montserrat, sans-serif;
            font-size: 1.6rem;
            margin: 0 0 10px 0;
            padding-right: 40px;
            font-weight: 700;
        }

        .modal-meta {
            color: #ffe0e0;
            font-size: 0.95rem;
        }

        .modal-autor {
            display: block;
            margin-bottom: 5px;
        }

        .modal-data {
            display: block;
        }

        .fechar-modal {
            position: absolute;
            top: 20px;
            right: 25px;
            color: #fff;
            font-size: 2rem;
            cursor: pointer;
            background: none;
            border: none;
            line-height: 1;
        }

        .modal-body {
            padding: 30px;
            flex: 1 1 auto;
            overflow-y: auto;
            line-height: 1.7;
        }

        .compartilhar-botoes {
            display: flex;
            gap: 10px;
            margin-top: 40px;
            padding-top: 30px;
            padding-bottom: 15px;
            border-top: 1px solid #e8d9c9;
        }

        .btn-compartilhar {
            background: #f5f5f5;
            border: 1px solid #ddd;
            color: #444;
            padding: 8px 15px;
            border-radius: 20px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .btn-compartilhar:hover {
            background: var(--vinho);
            color: #fff;
            border-color: var(--vinho);
        }

        .footer {
            background: var(--vinho);
            color: var(--creme);
            width: 100vw;
            margin-left: -50vw;
            left: 50%;
            padding: 48px 0 32px 0;
            text-align: center;
            position: relative;
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 86px;
            align-items: flex-start;
            margin-bottom: 12px;
            max-width: 1100px;
            margin-left: auto;
            margin-right: auto;
        }

        .footer-block {
            min-width: 220px;
            text-align: left;
        }

        .footer-block-title {
            font-family: Montserrat, sans-serif;
            color: #f3a600;
            font-weight: bold;
            font-size: 1.09em;
            margin-bottom: 13px;
            letter-spacing: .16em;
        }

        .footer-menu {
            padding: 0;
            margin: 0 0 10px 0;
            list-style: none;
        }

        .footer-menu li {
            margin-bottom: 6px;
            display: inline-block;
            margin-right: 11px;
        }

        .footer-menu a {
            color: var(--creme);
            text-decoration: none;
            font-size: 1.05em;
            letter-spacing: .015em;
            border-bottom: 1px dotted rgba(243, 166, 0, 0.2);
            padding: 0 4px;
            transition: color .2s;
        }

        .footer-menu a:hover {
            color: #f3a600;
        }

        .footer-contact {
            font-size: 1em;
            margin-top: 6px;
        }

        .footer-contact i {
            margin-right: 3px;
            color: #f3a600;
            font-size: 1.18em;
            vertical-align: middle;
        }

        .footer-contact a {
            color: var(--creme) !important;
            text-decoration: underline;
        }

        .paginacao {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin: 40px 0 20px;
        }

        .paginacao button {
            background: var(--vinho);
            color: #fff;
            border: none;
            padding: 8px 14px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background 0.2s;
        }

        .paginacao button:disabled {
            background: #aaa;
            cursor: not-allowed;
        }

        .paginacao button:hover:not(:disabled) {
            background: #a00;
        }

        .paginacao .info {
            font-weight: 600;
            color: var(--vinho);
            font-size: 0.95rem;
        }

        @media (max-width: 768px) {
            .topbar {
                grid-template-columns: 1fr;
                padding: 8px 4vw 6px;
                min-height: auto;
                gap: 8px;
            }
            .topbar-filler {
                display: none;
            }
            .logo-center-projection {
                grid-column: 1 / 2;
                justify-self: center;
                margin: 6px 0 4px;
            }
            .contact-top {
                grid-column: 1 / 2;
                justify-self: center;
                text-align: center;
                min-width: 100%;
                margin-top: 6px;
            }
            .contact-detail {
                display: inline-block;
                margin: 0 8px;
            }
            .social-links {
                margin-top: 6px;
            }
            nav {
                gap: 3vw;
                font-size: 1.05em;
                padding: 12px 2vw;
                flex-wrap: wrap;
            }
            .publicacoes-container {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 20px;
            }
            .sidebar-publicacoes {
                order: 2;
            }
            .artigo-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .artigo-categoria {
                align-self: flex-start;
            }
            .artigo-meta {
                flex-direction: column;
                gap: 5px;
                align-items: flex-start;
            }
            .pagetitle h1 {
                font-size: 2rem;
            }
            .footer-content {
                gap: 40px;
            }
        }
    </style>
</head>
<body>
<div class="marca-dagua"></div>
<div class="site-bg">
    <div class="header-fixed">
        <div class="topbar">
            <div class="topbar-filler"></div>
            <div class="logo-center-projection">
                <img src="logofm2.png" class="logo-img-fm" alt="Franceschini e Miranda Advogados">
            </div>
            <div class="contact-top">
                <div class="contact-title">CONTATO</div>
                <div class="contact-details">
                    <span><i class="fas fa-phone-alt"></i></span><span>55 011 3095-2566</span>
                </div>
                <div class="contact-details">
                    <span><i class="fas fa-envelope"></i></span><span>adv-fm@fm-advogados.com.br</span>
                </div>
                <div class="social-links">
                    <a href="https://instagram.com" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="https://x.com" target="_blank" title="X Twitter"><i class="fab fa-x-twitter"></i></a>
                    <a href="https://linkedin.com" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
        <nav>
            <a href="index.html">Home</a>
            <a href="escritorio.html">Escritório</a>
            <a href="profissionais.html">Profissionais</a>
            <a href="publicacoes.html" class="active">Publicações</a>
            <a href="contato.html">Contato</a>
        </nav>
    </div>

    <div class="header-spacer"></div>

    <section class="banner-bg"></section>

    <section class="pagetitle">
        <div class="container">
            <h1>Publicações</h1>
        </div>
    </section>

    <div class="publicacoes-container">
        <aside class="sidebar-publicacoes">
            <h3>Categorias</h3>
            <ul class="categoria-lista" id="categoria-lista">
                <li><a href="#" data-categoria="todos" class="filtro-ativo">Todos os Artigos</a></li>
                <li><a href="#" data-categoria="concorrencia">Direito da Concorrência</a></li>
                <li><a href="#" data-categoria="trabalhista">Direito Trabalhista</a></li>
                <li><a href="#" data-categoria="penal">Direito Penal Empresarial</a></li>
                <li><a href="#" data-categoria="administrativo">Direito Administrativo</a></li>
            </ul>

            <h3>Autores</h3>
            <ul class="autor-lista" id="autor-lista">
                <li><a href="#" data-autor="todos" class="filtro-ativo">Todos os Autores</a></li>
            </ul>
        </aside>

        <main class="lista-artigos" id="lista-artigos">
            <!-- Artigos serão carregados aqui -->
        </main>
    </div>

    <div class="paginacao" id="paginacao" style="display:none;">
        <button id="btn-ant">Anterior</button>
        <span class="info" id="pag-info"></span>
        <button id="btn-prox">Próxima</button>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-block">
                <div class="footer-block-title">ACESSO RÁPIDO</div>
                <ul class="footer-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="escritorio.html">Escritório</a></li>
                    <li><a href="profissionais.html">Profissionais</a></li>
                    <li><a href="publicacoes.html" class="active">Publicações</a></li>
                    <li><a href="contato.html">Contato</a></li>
                </ul>
            </div>
            <div class="footer-block">
                <div class="footer-block-title">SÃO PAULO</div>
                <div class="footer-contact">
                    <i class="fas fa-phone-alt"></i>
                    <a href="tel:551130952566">55 011 3095-2566</a>
                </div>
                <div class="footer-contact">
                    <i class="fas fa-envelope"></i>
                    <a href="mailto:adv-fm@fm-advogados.com.br">adv-fm@fm-advogados.com.br</a>
                </div>
            </div>
        </div>

        <div style="margin: 25px 0 15px 0; padding-top: 20px; border-top: 1px solid rgba(243, 166, 0, 0.2); text-align: center; font-size: 0.85em; opacity: 0.8;">
            <div style="display: inline-flex; align-items: center; gap: 10px; padding: 8px 16px; border-radius: 6px; background: rgba(123, 6, 6, 0.3);">
                <span style="color: #f3a600;">Desenvolvido por</span>
                <img src="wlti.png" alt="WLTI" style="height: 24px; filter: brightness(0) invert(1) sepia(1) saturate(5) hue-rotate(300deg); opacity: 0.9;">
                <span style="color: #fdf6ee;">WLTI Soluções em TI</span>
            </div>
            <p style="margin-top: 20px; font-size: 0.9em;">&copy; 2026 Franceschini e Miranda Advogados. Todos os direitos reservados.</p>
        </div>
    </footer>
</div>

<div id="modal-artigo" class="modal">
    <div class="modal-conteudo">
        <div class="modal-header">
            <h2 class="modal-titulo" id="modal-titulo"></h2>
            <div class="modal-meta">
                <span class="modal-autor" id="modal-autor"></span>
                <span class="modal-data" id="modal-data"></span>
            </div>
            <button class="fechar-modal">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
            <div class="compartilhar-botoes">
                <a href="#" class="btn-compartilhar" onclick="compartilharTwitter(); return false;"><i class="fab fa-x-twitter"></i> X</a>
                <a href="#" class="btn-compartilhar" onclick="compartilharLinkedIn(); return false;"><i class="fab fa-linkedin-in"></i> LinkedIn</a>
                <a href="#" class="btn-compartilhar" onclick="compartilharWhatsApp(); return false;"><i class="fab fa-whatsapp"></i> WhatsApp</a>
                <a href="https://instagram.com" class="btn-compartilhar" target="_blank"><i class="fab fa-instagram"></i> Instagram</a>
            </div>
        </div>
    </div>
</div>

<script>
    let publicacoes = [];
    let filtroCategoria = 'todos';
    let filtroAutor = 'todos';
    let paginaAtual = 1;
    const porPagina = 6; // mudar aqui se quiser mais/menos

    // NOVO: parser de data por extenso, tolerante a vírgulas
    function parseDataExtenso(str) {
        if (!str) return 0;

        let limpa = str.toLowerCase()
            .replace(/,/g, ' ')
            .replace(/\s+/g, ' ')
            .trim();

        const partes = limpa.split(' ');
        const dia = parseInt(partes[0], 10);
        const ano = parseInt(partes[partes.length - 1], 10);

        const meses = {
            'janeiro': 0,
            'fevereiro': 1,
            'marco': 2,
            'março': 2,
            'abril': 3,
            'maio': 4,
            'junho': 5,
            'julho': 6,
            'agosto': 7,
            'setembro': 8,
            'outubro': 9,
            'novembro': 10,
            'dezembro': 11
        };

        let mesIdx = -1;
        for (const nome in meses) {
            if (limpa.includes(' ' + nome + ' ')) {
                mesIdx = meses[nome];
                break;
            }
        }

        if (!dia || !ano || mesIdx === -1) return 0;

        const d = new Date(ano, mesIdx, dia);
        if (isNaN(d.getTime())) return 0;

        return d.getTime();
    }

    fetch('artigos.json')
        .then(res => res.json())
        .then(data => {
            // adiciona timestamp interno para ordenação e ordena do mais recente para o mais antigo
            publicacoes = data.map(p => ({
                ...p,
                _tsData: parseDataExtenso(p.data || '')
            }));

            publicacoes.sort((a, b) => b._tsData - a._tsData);

            inicializarPagina();
        })
        .catch(() => {
            console.warn('Nenhum artigo encontrado. Cadastre via formulário.');
            publicacoes = [];
            inicializarPagina();
        });

    function inicializarPagina() {
        criarFiltroAutores();
        carregarArtigos();
        configurarEventos();
    }

    function criarFiltroAutores() {
        const listaAutores = document.getElementById('autor-lista');
        const todosLink = listaAutores.querySelector('[data-autor="todos"]');
        listaAutores.innerHTML = '';
        listaAutores.appendChild(todosLink.parentElement);

        const autoresUnicos = [...new Set(publicacoes.map(p => p.autor))].sort();
        autoresUnicos.forEach(autor => {
            const li = document.createElement('li');
            li.innerHTML = `<a href="#" data-autor="${autor}">${autor}</a>`;
            listaAutores.appendChild(li);
        });
    }

    function carregarArtigos() {
        const lista = document.getElementById('lista-artigos');
        lista.innerHTML = '';

        const filtrados = publicacoes.filter(artigo => {
            const okCategoria = (filtroCategoria === 'todos' || artigo.categoria === filtroCategoria);
            const okAutor = (filtroAutor === 'todos' || artigo.autor === filtroAutor);
            return okCategoria && okAutor;
        });

        if (filtrados.length === 0) {
            lista.innerHTML = `
                <div class="artigo-card" style="text-align:center;padding:40px;">
                    <p style="color:#666;font-style:italic;">Nenhuma publicação encontrada.</p>
                </div>
            `;

            document.getElementById('paginacao').style.display = 'none';

            filtroCategoria = 'todos';
            filtroAutor = 'todos';
            paginaAtual = 1;

            document.querySelectorAll('.categoria-lista a').forEach(a => a.classList.remove('filtro-ativo'));
            document.querySelector('.categoria-lista a[data-categoria="todos"]').classList.add('filtro-ativo');

            document.querySelectorAll('.autor-lista a').forEach(a => a.classList.remove('filtro-ativo'));
            document.querySelector('.autor-lista a[data-autor="todos"]').classList.add('filtro-ativo');

            return;
        }

        const totalPaginas = Math.ceil(filtrados.length / porPagina);
        const inicio = (paginaAtual - 1) * porPagina;
        const paginaArtigos = filtrados.slice(inicio, inicio + porPagina);

        paginaArtigos.forEach(artigo => {
            const card = document.createElement('article');
            card.className = 'artigo-card';
            card.innerHTML = `
                <div class="artigo-header">
                    <h2 class="artigo-titulo">${artigo.titulo}</h2>
                    <span class="artigo-categoria">${getNomeCategoria(artigo.categoria)}</span>
                </div>
                <div class="artigo-meta">
                    <span class="artigo-data">${artigo.data}</span>
                    <span class="artigo-autor">${artigo.autor}</span>
                </div>
                <p class="artigo-resumo">${artigo.resumo}</p>
                <button class="btn-ler-artigo" data-id="${artigo.id}">Ler Artigo Completo</button>
            `;
            lista.appendChild(card);
        });

        const pag = document.getElementById('paginacao');
        pag.style.display = 'flex';
        document.getElementById('btn-ant').disabled = (paginaAtual === 1);
        document.getElementById('btn-prox').disabled = (paginaAtual === totalPaginas);
        document.getElementById('pag-info').textContent = `Página ${paginaAtual} de ${totalPaginas}`;
    }

    function getNomeCategoria(categoria) {
        const map = {
            concorrencia: 'Direito da Concorrência',
            trabalhista: 'Direito Trabalhista',
            penal: 'Direito Penal Empresarial',
            administrativo: 'Direito Administrativo'
        };
        return map[categoria] || categoria;
    }

    function configurarEventos() {
        document.getElementById('categoria-lista').addEventListener('click', e => {
            const link = e.target.closest('a');
            if (!link) return;
            e.preventDefault();

            document.querySelectorAll('.categoria-lista a').forEach(a => a.classList.remove('filtro-ativo'));
            link.classList.add('filtro-ativo');
            filtroCategoria = link.dataset.categoria || 'todos';
            paginaAtual = 1;
            carregarArtigos();
        });

        document.getElementById('autor-lista').addEventListener('click', e => {
            const link = e.target.closest('a');
            if (!link) return;
            e.preventDefault();

            document.querySelectorAll('.autor-lista a').forEach(a => a.classList.remove('filtro-ativo'));
            link.classList.add('filtro-ativo');
            filtroAutor = link.dataset.autor || 'todos';
            paginaAtual = 1;
            carregarArtigos();
        });

        document.getElementById('lista-artigos').addEventListener('click', e => {
            const btn = e.target.closest('.btn-ler-artigo');
            if (!btn) return;
            const id = parseInt(btn.dataset.id, 10);
            const artigo = publicacoes.find(a => a.id === id);
            if (artigo) abrirModal(artigo);
        });

        document.querySelector('.fechar-modal').addEventListener('click', () => {
            document.getElementById('modal-artigo').style.display = 'none';
        });

        window.addEventListener('click', e => {
            if (e.target.id === 'modal-artigo') {
                document.getElementById('modal-artigo').style.display = 'none';
            }
        });

        document.getElementById('btn-ant').addEventListener('click', () => {
            if (paginaAtual === 1) return;
            paginaAtual--;
            carregarArtigos();
            window.scrollTo({ top: document.querySelector('.lista-artigos').offsetTop - 120, behavior: 'smooth' });
        });

        document.getElementById('btn-prox').addEventListener('click', () => {
            const filtrados = publicacoes.filter(artigo => {
                const okCat = (filtroCategoria === 'todos' || artigo.categoria === filtroCategoria);
                const okAut = (filtroAutor === 'todos' || artigo.autor === filtroAutor);
                return okCat && okAut;
            });
            const totalPaginas = Math.ceil(filtrados.length / porPagina);
            if (paginaAtual >= totalPaginas) return;
            paginaAtual++;
            carregarArtigos();
            window.scrollTo({ top: document.querySelector('.lista-artigos').offsetTop - 120, behavior: 'smooth' });
        });
    }

    function abrirModal(artigo) {
        document.getElementById('modal-titulo').textContent = artigo.titulo;
        document.getElementById('modal-autor').textContent = artigo.autor;
        document.getElementById('modal-data').textContent = artigo.data;

        const texto = artigo.conteudo || '';
        let htmlTexto;

        if (texto.trim().startsWith('<')) {
            htmlTexto = texto;
        } else {
            const partes = texto.split(/\n\n+/);
            htmlTexto = partes
                .map(p => `<p>${p.trim().replace(/\n/g, '<br>')}</p>`)
                .join('');
        }

        const body = document.getElementById('modal-body');
        const botoes = body.querySelector('.compartilhar-botoes');
        body.innerHTML = htmlTexto;
        body.appendChild(botoes);

        document.getElementById('modal-artigo').style.display = 'block';
    }

    function compartilharTwitter() {
        window.open(
            'https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title + ' ' + window.location.href),
            '_blank'
        );
    }

    function compartilharLinkedIn() {
        window.open(
            'https://www.linkedin.com/sharing/share-offsite/?url=' + encodeURIComponent(window.location.href),
            '_blank'
        );
    }

    function compartilharWhatsApp() {
        window.open(
            'https://wa.me/?text=' + encodeURIComponent(document.title + ' ' + window.location.href),
            '_blank'
        );
    }
</script>
</body>
</html>
